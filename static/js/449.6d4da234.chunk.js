"use strict";(self.webpackChunkcompany=self.webpackChunkcompany||[]).push([[449],{449:(e,s,r)=>{r.r(s),r.d(s,{default:()=>le});var t=r(3216),a=r(4849);const n="userInfo_container__Vzdok",i="userInfo_info__hEoHE",l="userInfo_user_avatar__X6kQ6",o="userInfo_userDetailsTable__vbYdd";var u=r(4117),d=r(6363),c=r(7550),_=r(8606),h=r(1794),m=r(751),j=r(8171);const x="status_userStatus__6Ge5U",v="status_statusText__5oeFv",p="status_active__uqtFf",g="status_inactive__PvWdG",f="status_banned__HbPL2",P="status_pending__8UDcy",U="status_unknown__srH8e";var b=r(579);const C=e=>{let{user_status:s}=e;const{t:r}=(0,u.Bd)();let t,a;switch(s){case"active":t=(0,b.jsx)(_.A,{className:p}),a=r("UserStatus.Active");break;case"inactive":t=(0,b.jsx)(h.A,{className:g}),a=r("UserStatus.Inactive");break;case"banned":t=(0,b.jsx)(m.A,{className:f}),a=r("UserStatus.Banned");break;case"pending":t=(0,b.jsx)(j.A,{className:P}),a=r("UserStatus.Pending");break;default:t=(0,b.jsx)(j.A,{className:U}),a=r("UserStatus.Unknown")}return(0,b.jsxs)("div",{className:x,children:[t,(0,b.jsx)("span",{className:v,children:a})]})};var L=r(7370),k=r(2524),y=r(1906),A=r(3364);const N={formContainer:"form_edit_formContainer__Zs4J+",inputWrapper:"form_edit_inputWrapper__NHtGn",formHeader:"form_edit_formHeader__A-PNS",error:"form_edit_error__0n0dL",avatarPreview:"form_edit_avatarPreview__vooT6"};var S=r(3892),B=r(2230);const w="userAvatarUpload_uploadButton__EywS5",F="userAvatarUpload_hiddenInput__XqX4N",E="userAvatarUpload_previewImage__WXpkj",I=e=>{let{value:s,onChange:r}=e;const{t:t}=(0,u.Bd)();return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"file-upload",className:w,children:t("UserListPage.SelectPhoto")}),(0,b.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{var s;const t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&r(t)},className:F}),s&&(0,b.jsx)("img",{src:s,alt:t("UserListPage.user_firstname"),className:E})]})};var R=r(5795);const T=e=>{let{name:s,label:r,value:t,onChange:a}=e;return(0,b.jsx)(R.A,{fullWidth:!0,margin:"normal",variant:"outlined",label:r,name:s,value:t,onChange:a})};var G=r(7561),$=r(9190),H=r(9285),O=r(7970);const W=e=>{let{value:s,onChange:r}=e;const{t:t}=(0,u.Bd)();return(0,b.jsxs)(G.A,{fullWidth:!0,variant:"outlined",children:[(0,b.jsx)($.A,{children:t("UserListPage.user_status")}),(0,b.jsxs)(H.A,{value:s||"",onChange:e=>r(e.target.value),label:t("UserListPage.user_status"),children:[(0,b.jsx)(O.A,{value:"active",children:t("UserStatus.Active")}),(0,b.jsx)(O.A,{value:"inactive",children:t("UserStatus.Inactive")}),(0,b.jsx)(O.A,{value:"banned",children:t("UserStatus.Banned")}),(0,b.jsx)(O.A,{value:"pending",children:t("UserStatus.Pending")})]})]})},q=e=>{let{value:s,onChange:r}=e;const{t:t}=(0,u.Bd)();return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:t("UserListPage.user_links")}),s.map(((e,a)=>(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsx)(T,{name:`user_links[${a}]`,label:t(`UserListPage.Link${a+1}`),value:e,onChange:e=>((e,t)=>{const a=[...s];a[e]=t,r(a)})(a,e.target.value)}),(0,b.jsx)(y.A,{type:"button",onClick:()=>(e=>{const t=s.filter(((s,r)=>r!==e));r(t)})(a),variant:"contained",children:t("UserListPage.remove_link")})]},a))),s.length<5&&(0,b.jsx)(y.A,{type:"button",onClick:()=>{r([...s,""])},variant:"contained",children:t("UserListPage.add_link")})]})};var V=r(9250);const X=e=>{let{onSubmit:s,submitButtonText:r,fields:t}=e;const{t:a}=(0,u.Bd)(),{user:n}=(0,k.G)(L.j);if(!n)return(0,b.jsx)(V.A,{});const i=t.reduce(((e,s)=>{const r=null===n||void 0===n?void 0:n[s];return e[s]="user_links"===s?Array.isArray(r)?r:[""]:"string"===typeof r&&null!==r&&void 0!==r?r:"",e}),{});return(0,b.jsx)(S.l1,{initialValues:i,onSubmit:s,validationSchema:(0,B.d)(a,t),children:e=>{let{values:s,setFieldValue:n}=e;return(0,b.jsx)(S.lV,{className:N.form,children:(0,b.jsxs)("div",{className:N.inputWrapper,children:[(0,b.jsx)("p",{className:N.formHeader,children:r}),t.map((e=>{var r;return"user_status"===e?(0,b.jsx)(W,{value:s[e]||"",onChange:s=>n(e,s)},e):"user_links"===e?(0,b.jsx)(q,{value:s[e]||[],onChange:s=>n(e,s)},e):"user_avatar"===e?(0,b.jsx)(I,{value:s[e],onChange:s=>{n(e,URL.createObjectURL(s))}},e):(0,b.jsx)(T,{name:e,label:a(`UserListPage.${e}`),value:null!==(r=s[e])&&void 0!==r?r:"",onChange:s=>n(e,s.target.value)},e)})),(0,b.jsx)(y.A,{type:"submit",variant:"contained",children:r})]})})}})};var D=r(777);const Y=e=>{let{onSubmit:s,isLoading:r,submitButtonText:t,isOpen:a,onClose:n,title:i,fields:l}=e;return(0,b.jsx)(D.A,{isOpen:a,onClose:n,title:i,children:r?(0,b.jsx)(V.A,{}):(0,b.jsx)(X,{fields:l,onSubmit:s,submitButtonText:t})})};var Z=r(5043),M=r(857),Q=r(1036);const z=e=>{let{id:s}=e;const[r,t]=(0,Z.useState)(!1),{t:a}=(0,u.Bd)(),{isLoading:n,requestStatus:i,error:l}=(0,k.G)(A.P),o=(0,k.j)(),d=(0,Z.useCallback)((()=>t(!1)),[]);(0,Z.useEffect)((()=>{"fetchFulfilled"===i&&r&&(Q.oR.success(a("UserListPage.success")),d()),l&&Q.oR.error(a(l))}),[i,l,a,r,d]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{onClick:()=>t(!0),variant:"contained",color:"primary",children:a("UserListPage.UpdateInfo")}),(0,b.jsx)(Y,{onSubmit:e=>{o((0,M.SC)({id:s,body:e}))},isLoading:n,submitButtonText:a("UserListPage.UpdateInfo"),isOpen:r,onClose:d,fields:["user_firstname","user_lastname","user_city","user_phone","user_status","user_links"]})]})},J=e=>{let{id:s}=e;const[r,t]=(0,Z.useState)(!1),{t:a}=(0,u.Bd)(),{isLoading:n,requestStatus:i,error:l}=(0,k.G)(A.P),o=(0,k.j)(),d=(0,Z.useCallback)((()=>t(!1)),[]);(0,Z.useEffect)((()=>{"fetchFulfilled"===i&&r&&(Q.oR.success(a("UserListPage.success")),d()),l&&Q.oR.error(a(l||a("UserListPage.errorOccurred")))}),[i,l,a,r,d]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{onClick:()=>t(!0),variant:"contained",color:"primary",children:a("UserListPage.Update-password")}),(0,b.jsx)(Y,{onSubmit:e=>{o((0,M.hm)({id:s,body:e}))},isLoading:n,submitButtonText:a("UserListPage.Update-password"),isOpen:r,onClose:d,fields:["user_password","user_password_repeat"]})]})};var K=r(3726),ee=r(4094),se=r(7421);const re=e=>{let{id:s}=e;const r=(0,k.j)(),{t:a}=(0,u.Bd)(),n=(0,t.Zp)();return(0,b.jsx)(y.A,{onClick:()=>{K.Confirm.show(a("Confirm.title"),a("Confirm.message"),a("Confirm.buttonYes"),a("Confirm.buttonNo"),(()=>{r((0,M.KH)({id:s})),r((0,se.r)())}),(()=>{n(`${ee.i.UserListPage}/${s}`)}))},variant:"contained",color:"primary",children:a("UserListPage.delete")})},te=e=>{let{id:s}=e;const[r,t]=(0,Z.useState)(!1),{t:a}=(0,u.Bd)(),{isLoading:n,requestStatus:i,error:l}=(0,k.G)(A.P),o=(0,k.j)(),d=(0,Z.useCallback)((()=>t(!1)),[]);(0,Z.useEffect)((()=>{"fetchFulfilled"===i&&r&&(Q.oR.success(a("UserListPage.success")),t(!1)),l&&Q.oR.error(a(l||"An error occurred"))}),[i,l,a,r,d]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{onClick:()=>t(!0),variant:"contained",color:"primary",children:a("UserListPage.UpdatePhoto")}),(0,b.jsx)(Y,{onSubmit:async e=>{if(!e.user_avatar)return void Q.oR.error(a("UserListPage.ErrorNoPhoto"));const r=await(async e=>{try{const s=await fetch(e),r=await s.blob(),t=new FormData;return t.append("file",r,"file.jpg"),t}catch(s){return Q.oR.error(a("UserListPage.ErrorFetchingPhoto")),null}})(e.user_avatar);r&&o((0,M.oN)({id:s,body:r}))},isLoading:n,submitButtonText:a("UserListPage.UpdatePhoto"),isOpen:r,onClose:d,fields:["user_avatar"]})]})},ae=e=>{let{user_id:s,user_email:r,user_firstname:t,user_lastname:_,user_avatar:h,user_status:m,user_city:j,user_phone:x,user_links:v=[],is_superuser:p}=e;const{t:g}=(0,u.Bd)(),f=(0,k.G)(L.l);return(0,b.jsxs)("div",{className:n,children:[(0,b.jsx)("img",{src:h||a,alt:t&&_?`${t} ${_}`:g("UserListPage.noName"),className:l}),f===s&&(0,b.jsxs)("div",{children:[(0,b.jsx)(z,{id:f}),(0,b.jsx)(J,{id:f}),(0,b.jsx)(re,{id:f}),(0,b.jsx)(te,{id:f})]}),(0,b.jsx)("div",{className:i,children:(0,b.jsx)("table",{className:o,children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.user_firstname")}),(0,b.jsx)("td",{children:t})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.user_lastname")}),(0,b.jsx)("td",{children:_})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("CompanyPage.city")}),(0,b.jsx)("td",{children:j||g("CompanyPage.noCity")})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("CompanyPage.phone")}),(0,b.jsx)("td",{children:(0,b.jsx)("a",{href:`tel:${x}`,children:x||g("CompanyPage.noPhone")})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Superuser")}),(0,b.jsx)("td",{children:g(p?"Yes":"No")})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Status")}),(0,b.jsx)("td",{children:(0,b.jsx)(C,{user_status:m})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Email")}),(0,b.jsx)("td",{children:(0,b.jsx)(d.A,{email:r})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Links")}),(0,b.jsx)("td",{children:(0,b.jsx)(c.A,{links:v})})]})]})})})]})},ne=()=>{const e=(0,k.j)(),{id:s}=(0,t.g)();(0,Z.useEffect)((()=>{if(s){const r=Number(s);isNaN(r)||e((0,M.TZ)({id:r}))}}),[e,s]);const{user:r}=(0,k.G)(A.P);if(!r)return(0,b.jsx)(V.A,{});const{user_id:n,user_email:i,user_firstname:l,user_lastname:o,user_avatar:u,user_status:d,user_city:c,user_phone:_,user_links:h,is_superuser:m}=r;return(0,b.jsx)(ae,{user_id:n,user_email:i,user_firstname:l,user_lastname:o,user_avatar:u||a,user_status:d,user_city:c,user_phone:_,user_links:h,is_superuser:m})},ie="profile_container__FMuBQ",le=()=>{const{t:e}=(0,u.Bd)();return(0,b.jsxs)("div",{className:ie,children:[(0,b.jsx)("h1",{children:e("PageName.Profile")}),(0,b.jsx)(ne,{})]})}},3364:(e,s,r)=>{r.d(s,{P:()=>t});const t=e=>e.user},6363:(e,s,r)=>{r.d(s,{A:()=>i});var t=r(4117);const a="renderEmail_link__NM4nO";var n=r(579);const i=e=>{let{email:s}=e;const{t:r}=(0,t.Bd)();return s&&0!==s.length?(0,n.jsx)("a",{href:`mailto:${s}`,className:a,children:s}):(0,n.jsx)("p",{children:r("CompanyPage.noEmail")})}},7550:(e,s,r)=>{r.d(s,{A:()=>n});var t=r(4117),a=r(579);const n=e=>{let{links:s}=e;const{t:r}=(0,t.Bd)();return s&&0!==s.length?(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[r("CompanyPage.link"),":"]}),(0,a.jsx)("ul",{children:s.map((e=>(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},e)))})]}):(0,a.jsx)("p",{children:r("CompanyPage.noLink")})}},4849:(e,s,r)=>{e.exports=r.p+"static/media/no_img.7dd25cf047980b6d5843.jpg"}}]);
//# sourceMappingURL=449.6d4da234.chunk.js.map