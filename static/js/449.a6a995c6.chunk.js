"use strict";(self.webpackChunkcompany=self.webpackChunkcompany||[]).push([[449],{449:(e,s,t)=>{t.r(s),t.d(s,{default:()=>le});var r=t(3216),a=t(4849);const n="userInfo_container__Vzdok",i="userInfo_info__hEoHE",l="userInfo_user_avatar__X6kQ6",o="userInfo_userDetailsTable__vbYdd";var c=t(4117),u=t(6363),d=t(7550),_=t(8606),h=t(1794),m=t(751),j=t(8171);const x="status_userStatus__6Ge5U",v="status_statusText__5oeFv",p="status_active__uqtFf",g="status_inactive__PvWdG",f="status_banned__HbPL2",P="status_pending__8UDcy",U="status_unknown__srH8e";var b=t(579);const C=e=>{let{user_status:s}=e;const{t:t}=(0,c.Bd)();let r,a;switch(s){case"active":r=(0,b.jsx)(_.A,{className:p}),a=t("UserStatus.Active");break;case"inactive":r=(0,b.jsx)(h.A,{className:g}),a=t("UserStatus.Inactive");break;case"banned":r=(0,b.jsx)(m.A,{className:f}),a=t("UserStatus.Banned");break;case"pending":r=(0,b.jsx)(j.A,{className:P}),a=t("UserStatus.Pending");break;default:r=(0,b.jsx)(j.A,{className:U}),a=t("UserStatus.Unknown")}return(0,b.jsxs)("div",{className:x,children:[r,(0,b.jsx)("span",{className:v,children:a})]})};var L=t(7370),k=t(2524),y=t(1906),A=t(3364);const N={formContainer:"form_edit_formContainer__Zs4J+",inputWrapper:"form_edit_inputWrapper__NHtGn",formHeader:"form_edit_formHeader__A-PNS",error:"form_edit_error__0n0dL",avatarPreview:"form_edit_avatarPreview__vooT6"};var S=t(3516),B=t(2230);const w="userAvatarUpload_uploadButton__EywS5",F="userAvatarUpload_hiddenInput__XqX4N",E="userAvatarUpload_previewImage__WXpkj",I=e=>{let{value:s,onChange:t}=e;const{t:r}=(0,c.Bd)();return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"file-upload",className:w,children:r("UserListPage.SelectPhoto")}),(0,b.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{var s;const r=null===(s=e.target.files)||void 0===s?void 0:s[0];r&&t(r)},className:F}),s&&(0,b.jsx)("img",{src:s,alt:r("UserListPage.user_firstname"),className:E})]})};var R=t(5795);const T=e=>{let{name:s,label:t,value:r,onChange:a}=e;return(0,b.jsx)(R.A,{fullWidth:!0,margin:"normal",variant:"outlined",label:t,name:s,value:r,onChange:a})};var G=t(7561),H=t(9190),O=t(9285),W=t(7970);const q=e=>{let{value:s,onChange:t}=e;const{t:r}=(0,c.Bd)();return(0,b.jsxs)(G.A,{fullWidth:!0,variant:"outlined",children:[(0,b.jsx)(H.A,{children:r("UserListPage.user_status")}),(0,b.jsxs)(O.A,{value:s||"",onChange:e=>t(e.target.value),label:r("UserListPage.user_status"),children:[(0,b.jsx)(W.A,{value:"active",children:r("UserStatus.Active")}),(0,b.jsx)(W.A,{value:"inactive",children:r("UserStatus.Inactive")}),(0,b.jsx)(W.A,{value:"banned",children:r("UserStatus.Banned")}),(0,b.jsx)(W.A,{value:"pending",children:r("UserStatus.Pending")})]})]})},V=e=>{let{value:s,onChange:t}=e;const{t:r}=(0,c.Bd)();return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:r("UserListPage.user_links")}),s.map(((e,a)=>(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsx)(T,{name:"user_links[".concat(a,"]"),label:r("UserListPage.Link".concat(a+1)),value:e,onChange:e=>((e,r)=>{const a=[...s];a[e]=r,t(a)})(a,e.target.value)}),(0,b.jsx)(y.A,{type:"button",onClick:()=>(e=>{const r=s.filter(((s,t)=>t!==e));t(r)})(a),variant:"contained",children:r("UserListPage.remove_link")})]},a))),s.length<5&&(0,b.jsx)(y.A,{type:"button",onClick:()=>{t([...s,""])},variant:"contained",children:r("UserListPage.add_link")})]})};var X=t(9250);const D=e=>{let{onSubmit:s,submitButtonText:t,fields:r}=e;const{t:a}=(0,c.Bd)(),{user:n}=(0,k.G)(L.j);if(!n)return(0,b.jsx)(X.A,{});const i=r.reduce(((e,s)=>{const t=null===n||void 0===n?void 0:n[s];return e[s]="user_links"===s?Array.isArray(t)?t:[""]:"string"===typeof t&&null!==t&&void 0!==t?t:"",e}),{});return(0,b.jsx)(S.l1,{initialValues:i,onSubmit:s,validationSchema:(0,B.d)(a,r),children:e=>{let{values:s,setFieldValue:n}=e;return(0,b.jsx)(S.lV,{className:N.form,children:(0,b.jsxs)("div",{className:N.inputWrapper,children:[(0,b.jsx)("p",{className:N.formHeader,children:t}),r.map((e=>{var t;return"user_status"===e?(0,b.jsx)(q,{value:s[e]||"",onChange:s=>n(e,s)},e):"user_links"===e?(0,b.jsx)(V,{value:s[e]||[],onChange:s=>n(e,s)},e):"user_avatar"===e?(0,b.jsx)(I,{value:s[e],onChange:s=>{n(e,URL.createObjectURL(s))}},e):(0,b.jsx)(T,{name:e,label:a("UserListPage.".concat(e)),value:null!==(t=s[e])&&void 0!==t?t:"",onChange:s=>n(e,s.target.value)},e)})),(0,b.jsx)(y.A,{type:"submit",variant:"contained",children:t})]})})}})};var Y=t(777);const Z=e=>{let{onSubmit:s,isLoading:t,submitButtonText:r,isOpen:a,onClose:n,title:i,fields:l}=e;return(0,b.jsx)(Y.A,{isOpen:a,onClose:n,title:i,children:t?(0,b.jsx)(X.A,{}):(0,b.jsx)(D,{fields:l,onSubmit:s,submitButtonText:r})})};var M=t(5043),Q=t(857),z=t(1036);const J=e=>{let{id:s}=e;const[t,r]=(0,M.useState)(!1),{t:a}=(0,c.Bd)(),{isLoading:n,requestStatus:i,error:l}=(0,k.G)(A.P),o=(0,k.j)(),u=(0,M.useCallback)((()=>r(!1)),[]);(0,M.useEffect)((()=>{"fetchFulfilled"===i&&t&&(z.oR.success(a("UserListPage.success")),u()),l&&z.oR.error(a(l))}),[i,l,a,t,u]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{onClick:()=>r(!0),variant:"contained",color:"primary",children:a("UserListPage.UpdateInfo")}),(0,b.jsx)(Z,{onSubmit:e=>{o((0,Q.SC)({id:s,body:e}))},isLoading:n,submitButtonText:a("UserListPage.UpdateInfo"),isOpen:t,onClose:u,fields:["user_firstname","user_lastname","user_city","user_phone","user_status","user_links"]})]})},K=e=>{let{id:s}=e;const[t,r]=(0,M.useState)(!1),{t:a}=(0,c.Bd)(),{isLoading:n,requestStatus:i,error:l}=(0,k.G)(A.P),o=(0,k.j)(),u=(0,M.useCallback)((()=>r(!1)),[]);(0,M.useEffect)((()=>{"fetchFulfilled"===i&&t&&(z.oR.success(a("UserListPage.success")),u()),l&&z.oR.error(a(l||a("UserListPage.errorOccurred")))}),[i,l,a,t,u]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{onClick:()=>r(!0),variant:"contained",color:"primary",children:a("UserListPage.Update-password")}),(0,b.jsx)(Z,{onSubmit:e=>{o((0,Q.hm)({id:s,body:e}))},isLoading:n,submitButtonText:a("UserListPage.Update-password"),isOpen:t,onClose:u,fields:["user_password","user_password_repeat"]})]})};var $=t(3726),ee=t(4094),se=t(7421);const te=e=>{let{id:s}=e;const t=(0,k.j)(),{t:a}=(0,c.Bd)(),n=(0,r.Zp)();return(0,b.jsx)(y.A,{onClick:()=>{$.Confirm.show(a("Confirm.title"),a("Confirm.message"),a("Confirm.buttonYes"),a("Confirm.buttonNo"),(()=>{t((0,Q.KH)({id:s})),t((0,se.r)())}),(()=>{n("".concat(ee.i.UserListPage,"/").concat(s))}))},variant:"contained",color:"primary",children:a("UserListPage.delete")})},re=e=>{let{id:s}=e;const[t,r]=(0,M.useState)(!1),{t:a}=(0,c.Bd)(),{isLoading:n,requestStatus:i,error:l}=(0,k.G)(A.P),o=(0,k.j)(),u=(0,M.useCallback)((()=>r(!1)),[]);(0,M.useEffect)((()=>{"fetchFulfilled"===i&&t&&(z.oR.success(a("UserListPage.success")),r(!1)),l&&z.oR.error(a(l||"An error occurred"))}),[i,l,a,t,u]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{onClick:()=>r(!0),variant:"contained",color:"primary",children:a("UserListPage.UpdatePhoto")}),(0,b.jsx)(Z,{onSubmit:async e=>{if(!e.user_avatar)return void z.oR.error(a("UserListPage.ErrorNoPhoto"));const t=await(async e=>{try{const s=await fetch(e),t=await s.blob(),r=new FormData;return r.append("file",t,"file.jpg"),r}catch(s){return z.oR.error(a("UserListPage.ErrorFetchingPhoto")),null}})(e.user_avatar);t&&o((0,Q.oN)({id:s,body:t}))},isLoading:n,submitButtonText:a("UserListPage.UpdatePhoto"),isOpen:t,onClose:u,fields:["user_avatar"]})]})},ae=e=>{let{user_id:s,user_email:t,user_firstname:r,user_lastname:_,user_avatar:h,user_status:m,user_city:j,user_phone:x,user_links:v=[],is_superuser:p}=e;const{t:g}=(0,c.Bd)(),f=(0,k.G)(L.l);return(0,b.jsxs)("div",{className:n,children:[(0,b.jsx)("img",{src:h||a,alt:r&&_?"".concat(r," ").concat(_):g("UserListPage.noName"),className:l}),f===s&&(0,b.jsxs)("div",{children:[(0,b.jsx)(J,{id:f}),(0,b.jsx)(K,{id:f}),(0,b.jsx)(te,{id:f}),(0,b.jsx)(re,{id:f})]}),(0,b.jsx)("div",{className:i,children:(0,b.jsx)("table",{className:o,children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.user_firstname")}),(0,b.jsx)("td",{children:r})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.user_lastname")}),(0,b.jsx)("td",{children:_})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("CompanyPage.city")}),(0,b.jsx)("td",{children:j||g("CompanyPage.noCity")})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("CompanyPage.phone")}),(0,b.jsx)("td",{children:(0,b.jsx)("a",{href:"tel:".concat(x),children:x||g("CompanyPage.noPhone")})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Superuser")}),(0,b.jsx)("td",{children:g(p?"Yes":"No")})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Status")}),(0,b.jsx)("td",{children:(0,b.jsx)(C,{user_status:m})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Email")}),(0,b.jsx)("td",{children:(0,b.jsx)(u.A,{email:t})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:g("UserListPage.Links")}),(0,b.jsx)("td",{children:(0,b.jsx)(d.A,{links:v})})]})]})})})]})},ne=()=>{const e=(0,k.j)(),{id:s}=(0,r.g)();(0,M.useEffect)((()=>{if(s){const t=Number(s);isNaN(t)||e((0,Q.TZ)({id:t}))}}),[e,s]);const{user:t}=(0,k.G)(A.P);if(!t)return(0,b.jsx)(X.A,{});const{user_id:n,user_email:i,user_firstname:l,user_lastname:o,user_avatar:c,user_status:u,user_city:d,user_phone:_,user_links:h,is_superuser:m}=t;return(0,b.jsx)(ae,{user_id:n,user_email:i,user_firstname:l,user_lastname:o,user_avatar:c||a,user_status:u,user_city:d,user_phone:_,user_links:h,is_superuser:m})},ie="profile_container__FMuBQ",le=()=>{const{t:e}=(0,c.Bd)();return(0,b.jsxs)("div",{className:ie,children:[(0,b.jsx)("h1",{children:e("PageName.Profile")}),(0,b.jsx)(ne,{})]})}},3364:(e,s,t)=>{t.d(s,{P:()=>r});const r=e=>e.user},6363:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(4117);const a="renderEmail_link__NM4nO";var n=t(579);const i=e=>{let{email:s}=e;const{t:t}=(0,r.Bd)();return s&&0!==s.length?(0,n.jsx)("a",{href:"mailto:".concat(s),className:a,children:s}):(0,n.jsx)("p",{children:t("CompanyPage.noEmail")})}},7550:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(4117),a=t(579);const n=e=>{let{links:s}=e;const{t:t}=(0,r.Bd)();return s&&0!==s.length?(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[t("CompanyPage.link"),":"]}),(0,a.jsx)("ul",{children:s.map((e=>(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},e)))})]}):(0,a.jsx)("p",{children:t("CompanyPage.noLink")})}},4849:(e,s,t)=>{e.exports=t.p+"static/media/no_img.7dd25cf047980b6d5843.jpg"}}]);
//# sourceMappingURL=449.a6a995c6.chunk.js.map